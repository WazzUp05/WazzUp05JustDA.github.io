window.App={baseURL:"http://okkapi.agency/",lng:"",loaded:!1,mapLoaded:!1,Models:{},Views:{},Collections:{},Router:{},pages:[],mob:!1,template:function(e){return Handlebars.compile($("#"+e).html())},appLoaded:function(){App.mainModel.set("loaded",!0)},loadApp:function(){App.detectOS(),App.lng=new App.Models.Lng({lng:""}),App.router=new App.Router,Backbone.history.start({pushState:!0})},detectOS:function(){-1!==navigator.appVersion.indexOf("Android")&&(App.mob=!0),-1!==navigator.appVersion.indexOf("iPhone")&&(App.mob=!0)},loadData:function(e,t){App.mainModel=new App.Models.App,App.mainView=new App.Views.Main({model:App.mainModel,lng:App.lng}),App.pages.home=new App.Views.Home({model:new App.Models.Home,lng:App.lng}),App.pages.agency=new App.Views.Agency({model:new App.Models.Agency,lng:App.lng}),App.pages.works=new App.Views.Works({model:new App.Models.Works,lng:App.lng,work:t}),App.pages.contact=new App.Views.Contact({model:new App.Models.Contact,lng:App.lng}),App.pages.notfound=new App.Views.Notfound({model:new App.Models.Notfound,lng:App.lng}),App.loaded=!0,"function"==typeof e&&e()},showPage:function(e){null!==e&&void 0!==e||(e="home"),"works"===e?$("html").addClass("works"):$("html").removeClass("works"),"home"===e?App.mainModel.set("currentPage",""):(App.mainModel.set("currentPage",e),App.pages.home.kldStop()),"404"===e?e="notfound":App.pages.notfound.noiseStop(),void 0!==App.pages[e]?($(".page_wrapper").html(App.pages[e].$el),App.globalEventsInit(),"right_inv"!==App.pages[e].inv&&$(".app").removeClass("right_inv"),"inv"!==App.pages[e].inv&&$(".app").removeClass("inv"),$(".app").addClass(App.pages[e].inv),"function"==typeof App.pages[e].afterLoad&&App.pages[e].afterLoad(),$(".nav li").removeClass("active"),$('.nav li a[data-page="'+e+'"]').parent().addClass("active")):"ru"===App.lng.get("lngName")?App.router.navigate("404",{trigger:!0}):App.router.navigate("en/404",{trigger:!0}),null!=App.pages[e].model.toJSON().meta&&App.metaData(App.pages[e].model.toJSON().meta)},metaData:function(e){null!=e&&(App.pageMetaData=e,e=e[App.lng.get("lngName")],$("head title").html(e.title),$('head meta[name="og:title"], head meta[name="twitter:title"]').attr("content",e.title),$('head meta[name="description"], head meta[name="og:description"], head meta[name="twitter:description"]').attr("content",e.description),$('head meta[property="og:url"]').attr("content",App.baseURL+e.url))},pageLoaded:function(){$(".page_wrapper").removeClass("close_page"),$(".page").removeClass("before_open")},hidePreloader:function(){0!==$(".preloader").length&&(setTimeout(function(){$(".preloader").addClass("hid")},1500),setTimeout(function(){App.preloader=$(".preloader").remove()},2300))},globalEventsInit:function(){$(".cta").on("mousemove",function(e){var t;t=e.pageX-$(this).offset().left-$(this).width(),$(this).find(".bg").css({transform:"translate3d("+t+"px, -50%, 0)"})}),$(".cta").on("mouseleave",function(e){}),App.resizeDetect()},initMap:function(){!0!==App.mapLoaded&&(App.mapLoaded=!0,App.pages.contact.initMap())},checkTurn:function(){$(window).width()<640&&window.innerHeight<window.innerWidth||window.innerHeight<480?$(".turn_device").show():setTimeout(function(){$(".turn_device").fadeOut()},500)},resizeDetect:function(){var e,t,i,n,s,a;i=0,n=!1,e=800,a=0,s=0,t=function(){new Date-i<e?setTimeout(function(){t()},e):(n=!1,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0))},$(window).resize(function(){App.checkTurn(),!1===n&&(n=!0,i=new Date,a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),setTimeout(function(){t()},e))})}},Handlebars.registerHelper("each",function(e,t){var i,n,s;for(s="",i=0,n=e.length;i<n;)s+=t.fn(e[i]),i++;return s}),Handlebars.registerHelper("times",function(e,t){var i,n;for(i="",n=1;n<=e;)i+=t.fn(n),++n;return i}),Handlebars.registerHelper("inc",function(e){return parseInt(e)+1}),$(document).ready(function(){console.log("document ready"),App.loadApp(),App.globalEventsInit(),App.checkTurn()}),String.prototype.replaceAt=function(e,t){return void 0===t&&(t=" "),this.substr(0,e)+t+this.substr(e+t.length)},$.prototype.splitByLines=function(){var e,t,i,n,s,a,o;if(e=$(this),void 0!==(a=e.html()))for(o=a.split(" "),s=[],e.html(""),t=e.height(),i=0;i<o.length;){if(e.text(e.text()+" "+o[i]),e.height()>t||-1!==o[i].indexOf("<br>")?(-1!==o[i].indexOf("<br>")&&(o[i]=o[i].substr(o[i].indexOf("<br>"),4)),t=e.height(),s.push([]),s[s.length-1]+=o[i]+" "):s[s.length-1]+=o[i]+" ",i===o.length-1)for(e.html(""),n=0;n<s.length;)e.append('<div class="string"><span class="down">'+s[n]+"</span></div>"),n++;i++}},$.prototype.splitByWords=function(){var e,t,i,n;if(e=$(this),void 0!==(i=e.html())){for(n=i.split(" "),e.html(""),t=0;t<n.length;)e.append('<div class="word" data-word="'+n[t]+'">'+n[t]+"</div>"),t++;t++}},App.Models.App=Backbone.Model.extend({defaults:{loaded:!1,pagetitle:"",currentPage:"/",nav:{ru:[{page:"works",title:"Р Р°Р±РѕС‚С‹"},{page:"agency",title:"РђРіРµРЅС‚СЃС‚РІРѕ"},{page:"contact",title:"РљРѕРЅС‚Р°РєС‚С‹"}],en:[{page:"works",title:"Works"},{page:"agency",title:"Agency"},{page:"contact",title:"Contact us"}]},links:{dribbble:"https://dribbble.com/",behance:"https://www.behance.net/okkapi",codepen:"https://codepen.io/okkapi"}}}),App.Models.Home=Backbone.Model.extend({defaults:{images:["1.jpg","2.jpg","3.jpg"],meta:{ru:{title:"Okkapi вЂ“ РєСЂРµР°С‚РёРІ Рё СЂР°Р·СЂР°Р±РѕС‚РєР° СЃРѕРІСЂРµРјРµРЅРЅС‹С… СЃР°Р№С‚РѕРІ",description:"РњС‹ Р·Р°РЅРёРјР°РµРјСЃСЏ РґРёР·Р°Р№РЅРѕРј Рё СЂР°Р·СЂР°Р±РѕС‚РєРѕР№ СЃРѕРІСЂРµРјРµРЅРЅС‹С… РёРјРёРґР¶РµРІС‹С… СЃР°Р№С‚РѕРІ",url:""},en:{title:"Okkapi вЂ“ creativity and modern website development",description:"We design and develop modern websites",url:"en/"}},content:{ru:[{text1:"Emotion",text2:"Р’С‹СЃРѕРєРёР№ СѓСЂРѕРІРµРЅСЊ РІР·Р°РёРјРѕРґРµР№СЃС‚РІРёСЏ",text3:[["Р’РѕРІР»РµС‡РµРЅРЅРѕСЃС‚СЊ","Р°СѓРґРёС‚РѕСЂРёРё"],["Р”РѕРІРµСЂРёРµ","РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№"],["Р­С„С„РµРєС‚РёРІРЅР°СЏ","РєРѕРјРјСѓРЅРёРєР°С†РёСЏ"]],text4:["РњРµРЅСЏРµРј <br/>Рє Р»СѓС‡С€РµРјСѓ","РџРѕРІС‹С€Р°РµРј","РќР°С€Р° <br/> С†РµР»СЊ"]},{text1:"Vision",text2:"РўРІРѕСЂС‡РµСЃРєРёР№ РїРѕРґС…РѕРґ Рє СЂРµС€РµРЅРёСЋ Р·Р°РґР°С‡",text3:[["РЎРѕРІСЂРµРјРµРЅРЅС‹Р№","РґРёР·Р°Р№РЅ"],["РЈР·РЅР°РІР°РµРјРѕСЃС‚СЊ","Р±СЂСЌРЅРґР°"],["РЈСЂРѕРІРµРЅСЊ","СЌРјРїР°С‚РёРё"]],text4:["РЎРѕР·РґР°РµРј","Р Р°СЃС€РёСЂСЏРµРј","РџРѕРІС‹С€Р°РµРј"]},{text1:"Technologies",text2:"РџСЂРёРјРµРЅРµРЅРёРµ РїРµСЂРµРґРѕРІС‹С… С‚РµС…РЅРѕР»РѕРіРёР№",text3:[["РІС‹СЃРѕРєР°СЏ","РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЊРЅРѕСЃС‚СЊ"],["РєСЂРѕСЃСЃР±СЂР°СѓР·РµСЂРЅРѕСЃС‚СЊ","Рё РєСЂРѕСЃСЃРїР»Р°С‚С„РѕСЂРјРµРЅРЅРѕСЃС‚СЊ"],["РєР°С‡РµСЃС‚РІРѕ","Рё РЅР°РґРµР¶РЅРѕСЃС‚СЊ"]],text4:["","",""]}],en:[{text1:"Emotion",text2:"High level of user experience",text3:[["Audience","engagement"],["the trust","of users"],["effective","communication"]],text4:["We make <br/>better","We <br/>increase","Our <br/>goal is"]},{text1:"Vision",text2:"Creative approach to solving problems",text3:[["A modern","design"],["Brand","recognition"],["Level","of empathy"]],text4:["We <br/>create","We <br/>extend","We <br/>increase"]},{text1:"Technologies",text2:"Using innovative technologies",text3:[["high","performance"],["Cross-browser","and cross-platform"],["Quality","and reliability"]],text4:["","",""]}]}}}),App.Models.Kaleidoskope=Backbone.Model.extend({defaults:{current:"",images:[],loop:!0}}),App.Models.Lng=Backbone.Model.extend({defaults:{lng:"",lngName:"ru"},initialize:function(){this.listenTo(this,"change:lng",this.changeName)},changeName:function(){switch(this.get("lng")){case"":this.set("lngName","ru");break;case"en":this.set("lngName","en")}}}),App.Models.Agency=Backbone.Model.extend({defaults:{meta:{ru:{title:"РљС‚Рѕ С‚Р°РєРёРµ Okkapi?",description:"РњС‹ Р·Р°РЅРёРјР°РµРјСЃСЏ РґРёР·Р°Р№РЅРѕРј Рё СЂР°Р·СЂР°Р±РѕС‚РєРѕР№ СЃРѕРІСЂРµРјРµРЅРЅС‹С… РёРјРёРґР¶РµРІС‹С… СЃР°Р№С‚РѕРІ СЃ СѓРїРѕСЂРѕРј РЅР° РёРЅС‚РµСЂР°РєС‚РёРІ, Р°РЅРёРјР°С†РёРё РёРЅС‚РµСЂС„РµР№СЃР° Рё С‚РµС…РЅРѕР»РѕРіРёС‡РЅРѕСЃС‚СЊ РёСЃРїРѕР»РЅРµРЅРёСЏ",url:"agency/"},en:{title:"Who is Okkapi",description:"We design and develop modern websites with an emphasis on details, UI-animations, user interaction and innovative technologies.",url:"en/agency/"}},content:{ru:{bgWords:["creative","design","exciting","inspiring","modern","awesome","emotional","technology","incredible","fantastic"],subNav:["Рћ РЅР°СЃ","РђРіРµРЅС‚СЃС‚РІР°Рј"],offer1:"РњС‹ Р·Р°РЅРёРјР°РµРјСЃСЏ РґРёР·Р°Р№РЅРѕРј Рё СЂР°Р·СЂР°Р±РѕС‚РєРѕР№ СЃРѕРІСЂРµРјРµРЅРЅС‹С… РёРјРёРґР¶РµРІС‹С… СЃР°Р№С‚РѕРІ СЃ СѓРїРѕСЂРѕРј РЅР° РёРЅС‚РµСЂР°РєС‚РёРІ, Р°РЅРёРјР°С†РёРё РёРЅС‚РµСЂС„РµР№СЃР° Рё С‚РµС…РЅРѕР»РѕРіРёС‡РЅРѕСЃС‚СЊ РёСЃРїРѕР»РЅРµРЅРёСЏ. РќР°С€Р° С†РµР»СЊ вЂ” СЃРѕР·РґР°С‚СЊ РїСЂРѕРґСѓРєС‚, РєРѕС‚РѕСЂС‹Р№ РїРѕРјРѕР¶РµС‚ РІР°С€РµР№ РєРѕРјРїР°РЅРёРё РІС‹РґРµР»РёС‚СЊСЃСЏ СЃСЂРµРґРё РєРѕРЅРєСѓСЂРµРЅС‚РѕРІ, Р·Р°РІРѕРµРІР°С‚СЊ Р°СѓРґРёС‚РѕСЂРёСЋ Рё РїРѕРІС‹СЃРёС‚СЊ Р»РѕСЏР»СЊРЅРѕСЃС‚СЊ Р±СЂРµРЅРґСѓ.",keyWords1:["СЃРѕРІСЂРµРјРµРЅРЅС‹С…","С‚РµС…РЅРѕР»РѕРіРёС‡РЅРѕСЃС‚СЊ","Р·Р°РІРѕРµРІР°С‚СЊ","Р»РѕСЏР»СЊРЅРѕСЃС‚СЊ"],keyWords2:["РёРЅС‚РµСЂРµСЃРЅС‹РјРё","СЃРїРµС†РёР°Р»РёР·Р°С†РёСЏ:","СЃРѕРѕС‚РІРµС‚СЃС‚РІРёРµ","РџРѕРЅСЏС‚РЅС‹Р№"],cta:["РћР±СЃСѓРґРёС‚СЊ РїСЂРѕРµРєС‚"]},en:{bgWords:["creative","design","exciting","conceptual","modern","awesome","emotional","technology","incredible","fantastic"],subNav:["About Us","To agencies"],offer1:"We design and develop modern websites with an emphasis on details, UI-animations, user interaction and innovative technologies. Our goal is to create a product, which will help your company to stand out, to attract the audience and to increase brand loyalty.",keyWords1:["modern","details","innovative","goal","create","attract","increase"],keyWords2:["reprehenderit","Excepteur"],cta:["Contact us"]}}}}),App.Models.Contact=Backbone.Model.extend({defaults:{meta:{ru:{title:"РљРѕРЅС‚Р°РєС‚С‹ РєСЂРµР°С‚РёРІРЅРѕРіРѕ Р°РіРµРЅС‚СЃС‚РІР° Okkapi",description:"",url:"contact/"},en:{title:"Okkapi вЂ“ our contacts",description:"",url:"en/contact/"}},content:{ru:{address:"РњРѕСЃРєРІР°, Р’Р°СЂС€Р°РІСЃРєРѕРµ С€. 28Р°"},en:{address:"Russia, Moscow, Varshavskoe 28a"}}}}),App.Models.Works=Backbone.Model.extend({defaults:{meta:{ru:{title:"Okkapi вЂ“ РІС‹РїРѕР»РЅРµРЅРЅС‹Рµ СЂР°Р±РѕС‚С‹",description:"Р’СЃРµ РїСЂРѕРµРєС‚С‹ СЂР°Р·СЂР°Р±РѕС‚Р°РЅРЅС‹Рµ РєСЂРµР°С‚РёРІРЅС‹Рј Р°РіРµРЅС‚СЃС‚РІРѕРј Okkapi, РѕС‚Р»РёС‡Р°СЋС‚СЃСЏ РІС‹СЃРѕРєРёРј СѓСЂРѕРІРЅРµРј РёСЃРїРѕР»РЅРµРЅРёСЏ Рё С‚РµС…РЅРѕР»РѕРіРёС‡РЅРѕСЃС‚СЊСЋ",url:"works/"},en:{title:"Okkapi вЂ“ our works",description:"Every our project is made with high performance and using innovative technologies.",url:"en/works/"}},content:{ru:[{id:1,name:"eurodecor",title:"Euro Decor",intro:"РћРґРёРЅ РёР· РєСЂСѓРїРЅРµР№С€РёС… РёРіСЂРѕРєРѕРІ РЅР° СЂРѕСЃСЃРёР№СЃРєРѕРј СЂС‹РЅРєРµ РѕР±РѕРµРІ.",keywords:[],poster:"eurodecor.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://www.euro-decor.ru",case_link:"/works/ru/eurodecor.html"},{id:2,name:"grad",title:"Р“СЂР°РґРїСЂРѕРµРєС‚",intro:"РђРґР°РїС‚РёРІРЅС‹Р№ СЃР°Р№С‚ РґР»СЏ РєРѕРјРїР°РЅРёРё, Р»РёРґРµСЂР° Р РѕСЃСЃРёР№СЃРєРѕРіРѕ СЂС‹РЅРєР° РІ РѕР±Р»Р°СЃС‚Рё РєРѕРјРїР»РµРєСЃРЅРѕРіРѕ РїСЂРѕРµРєС‚РёСЂРѕРІР°РЅРёСЏ.",keywords:["РђРґР°РїС‚РёРІРЅС‹Р№","BIM-С‚РµС…РЅРѕР»РѕРіРёР№"],poster:"grad.jpg",video:"undefined",link:"https://www.behance.net/gallery/55522385/GradPro",web_link:"http://gradprogroup.ru",case_link:"/works/ru/grad.html"},{id:3,name:"adissy",title:"Adissy",intro:"РђРґР°РїС‚РёРІРЅС‹Р№ СЃР°Р№С‚ РєРѕРјРїР°РЅРёРё, РїСЂРµРґРѕСЃС‚Р°РІР»СЏСЋС‰РµР№ СЂРµС€РµРЅРёСЏ Digital Signage",keywords:["РђРґР°РїС‚РёРІРЅС‹Р№","Digital Signage"],poster:"adissy.jpg",video:"undefined",link:"https://www.behance.net/gallery/55754199/Adissy",web_link:"http://adissy.tech",case_link:"/works/ru/adissy.html"},{id:4,name:"yavid",title:"Yavid",intro:"РљРѕСЂРїРѕСЂР°С‚РёРІРЅС‹Р№ СЃР°Р№С‚ РїСЂРѕРёР·РІРѕРґСЃС‚РІРµРЅРЅРѕРіРѕ РїСЂРµРґРїСЂРёСЏС‚РёСЏ Yavid. Р¤Р°Р±СЂРёРєР° СЃРїРµС†РёР°Р»РёР·РёСЂСѓРµС‚СЃСЏ РЅР° РїСЂРѕРёР·РІРѕРґСЃС‚РІРµ РјРµР±РµР»Рё РёР· РґСѓР±Р°.",keywords:[],poster:"yavid.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://yavid-mebel.ru/",case_link:"/works/ru/yavid.html"},{id:5,name:"context",title:"Context",intro:'РђРґР°РїС‚РёРІРЅС‹Р№ СЃР°Р№С‚ РґР»СЏ Р±РёРѕС‚РµС…-СЃС‚Р°СЂС‚Р°РїР° РёР· "РљСЂРµРјРЅРёРµРІРѕР№ РґРѕР»РёРЅС‹". РљРѕРјРїР°РЅРёСЏ СЂР°Р·СЂР°Р±Р°С‚С‹РІР°РµС‚ РґР°С‚С‡РёРєРё РґР»СЏ РґРёР°РіРЅРѕСЃС‚РёС‡РµСЃРєРѕРіРѕ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ.',keywords:[],poster:"context.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://context.ai",case_link:"/works/en/context.html"},{id:6,name:"getmoney",title:"Getmoney",intro:"GET money вЂ“ СЃРѕРІСЂРµРјРµРЅРЅР°СЏ РёРЅРІРµСЃС‚РёС†РёРѕРЅРЅР°СЏ РїР»РѕС‰Р°РґРєР° РґР»СЏ РїСЂРёРІР»РµС‡РµРЅРёСЏ СЂР°Р·Р»РёС‡РЅС‹С… С„РѕСЂРј Р·Р°РµРјРЅРѕРіРѕ С„РёРЅР°РЅСЃРёСЂРѕРІР°РЅРёСЏ.",keywords:[],poster:"getmoney.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://en.get-money.su",case_link:"/works/en/getmoney.html"},{id:7,name:"tkd",title:"РўРљР”-РЎРѕС‡Рё",intro:"Р”РёР·Р°Р№РЅ Рё СЂР°Р·СЂР°Р±РѕС‚РєР° СЃР°Р№С‚Р° РґР»СЏ СЃРµСЂРІРёСЃР° Р°СЂРµРЅРґС‹ Р°РІС‚РѕРјРѕР±РёР»РµР№ РїСЂРµРјРёСѓРј-РєР»Р°СЃСЃР°",keywords:["Р Р°Р·СЂР°Р±РѕС‚РєР°","РїСЂРµРјРёСѓРј-РєР»Р°СЃСЃР°"],poster:"tkd.jpg",video:"undefined",link:"https://www.behance.net/gallery/36856945/TKD",web_link:"http://tkd-sochi.ru",case_link:"/works/en/tkd.html"},{id:8,name:"astralux",title:"Astralux",intro:"CР°Р№С‚ СЃ РєР°С‚Р°Р»РѕРіРѕРј РїСЂРѕРґСѓРєС†РёРё РґР»СЏ Р»РёРґРёСЂСѓСЋС‰РµРіРѕ РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЏ С€РІРµР№РЅРѕРіРѕ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ РІ СЃС‚СЂР°РЅР°С… Р•РІСЂРѕСЃРѕСЋР·Р° Рё РЎРќР“",keywords:["Р»РёРґРёСЂСѓСЋС‰РµРіРѕ","РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ"],poster:"astralux.jpg",video:"undefined",link:"https://www.behance.net/gallery/55596877/Astralux",web_link:"http://myastralux.ru",case_link:"/works/ru/astralux.html"}],en:[{id:1,name:"eurodecor",title:"Euro Decor",intro:"Euro Decor is one of the largest manufacturers in the Russian wallpaper market.",keywords:[],poster:"eurodecor.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://www.euro-decor.org",case_link:"/works/ru/eurodecor.html"},{id:2,name:"grad",title:"GradPro",intro:"Responsive website for the company, which is the leader of the Russian integrated design market.",keywords:["Lorem","eiusmod"],poster:"grad.jpg",video:"undefined",link:"https://www.behance.net/gallery/55522385/GradPro",web_link:"http://gradprogroup.ru",case_link:"/works/en/grad.html"},{id:3,name:"adissy",title:"Adissy",intro:"Responsive website for a company, which offers digital signage solutions. ",keywords:["РђРґР°РїС‚РёРІРЅС‹Р№","Digital Signage"],poster:"adissy.jpg",video:"undefined",link:"https://www.behance.net/gallery/55754199/Adissy",web_link:"http://adissy.tech",case_link:"/works/ru/adissy.html"},{id:4,name:"yavid",title:"Yavid",intro:"The corporate site of the manufacturing enterprise Yavid. The factory specializes in the production of furniture from oak.",keywords:[],poster:"yavid.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://yavid-mebel.ru/",case_link:"/works/ru/yavid.html"},{id:5,name:"context",title:"Context",intro:"Diagnostic fingerprints of current & future health.",keywords:[],poster:"context.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://context.ai",case_link:"/works/en/context.html"},{id:6,name:"getmoney",title:"Getmoney",intro:"Getmoney is a modern investment platform for attracting various forms of debt financing.",keywords:[],poster:"getmoney.jpg",video:"undefined",link:"https://www.behance.net/",web_link:"http://en.get-money.su",case_link:"/works/en/getmoney.html"},{id:7,name:"tkd",title:"TKD-Sochi",intro:"Website design and development for a premium car-rental service.",keywords:["Р Р°Р·СЂР°Р±РѕС‚РєР°","РїСЂРµРјРёСѓРј-РєР»Р°СЃСЃР°"],poster:"tkd.jpg",video:"undefined",link:"https://www.behance.net/gallery/36856945/TKD",web_link:"http://tkd-sochi.ru",case_link:"/works/en/tkd.html"},{id:8,name:"astralux",title:"Astralux",intro:"Website with a catalog of products for the leading manufacturer of sewing equipment in the countries of the European Union and the CIS.",keywords:["Р»РёРґРёСЂСѓСЋС‰РµРіРѕ","РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ"],poster:"astralux.jpg",video:"undefined",link:"https://www.behance.net/gallery/55596877/Astralux",web_link:"http://myastralux.ru",case_link:"/works/ru/astralux.html"}]}}}),App.Models.Notfound=Backbone.Model.extend({defaults:{meta:{ru:{title:"РќРµС‚ С‚Р°РєРѕР№ СЃС‚СЂР°РЅРёС†С‹",description:"РЎС‚СЂР°РЅРёС†Р° 404, РЅР°Р№РґРµС‚СЃСЏ РІСЃРµ, РЅРѕ СЌС‚Рѕ РЅРµС‚РѕС‡РЅРѕ",url:"404/"},en:{title:"Page not found",description:"Nothing to describe here...",url:"en/404/"}},content:{ru:{text:"РЎС‚СЂР°РЅРёС†Р° РЅРµ РЅР°Р№РґРµРЅР°"},en:{text:"Page not found"}},loop:!0}}),App.Router=Backbone.Router.extend({routes:{"en/works(/:work)":"work_en","works(/:work)":"work_ru","en(/)(:page)(/)":"en_page",":page(/)":"page","":"default"},page:function(e,t){App.lng.set("lng",""),!0===App.loaded?App.showPage(e):App.loadData(function(){App.showPage(e)},t)},en_page:function(e,t){App.lng.set("lng","en"),!0===App.loaded?App.showPage(e):App.loadData(function(){App.showPage(e)},t)},work_ru:function(e){this.work(!1,e)},work_en:function(e){this.work(!0,e)},work:function(e,t){return null==App.pages.works&&(e?this.en_page("works",t):this.page("works",t)),t&&!App.pages.works.caseVisible?void App.pages.works.ajaxGetCase(t):App.pages.works.caseVisible?void App.pages.works.hideCase():void(e?this.en_page("works"):this.page("works"))},default:function(){App.lng.set("lng",""),!0===App.loaded?App.showPage("home"):App.loadData(function(){return App.showPage("home")})}}),App.Views.Agency=Backbone.View.extend({className:"page before_open",tpl:"agencyTpl",inv:"",spinWords:!1,initialize:function(e){this.lng=e.lng,this.listenTo(this.lng,"change",function(){this.lngChange()}),this.render()},render:function(){var e;e=this.model.get("content")[this.lng.get("lngName")],this.template=App.template(this.tpl),this.$el.html(this.template(e)),this.$el.find(".offers ul li").each(function(){return $(this).splitByWords()})},events:{"click .sub_nav li":"tabClick","click .cta":"cta"},cta:function(e){var t;e.preventDefault(),this.close(),$(".page_wrapper").addClass("close_page"),t=this.lng.get("lng")+"/contact",setTimeout(function(){return App.router.navigate(t,{trigger:!0})},700)},lngChange:function(){var e;e=this,this.content=this.model.get("content")[this.lng.get("lngName")],this.updateTabs(),this.$el.find(".offers").addClass("hid"),this.$el.find(".cta").addClass("change"),setTimeout(function(){e.$el.find(".offers ul li").eq(0).html(e.content.offer1),e.$el.find(".offers ul li").eq(1).html(e.content.offer2),e.$el.find(".offers ul li").each(function(){return $(this).splitByWords()}),e.calcHeight(),e.$el.find(".offers").removeClass("hid"),e.$el.find(".cta span").html(e.content.cta),e.$el.find(".cta").removeClass("change"),e.markWords()},700)},updateTabs:function(){var e,t;e=this.content.subNav,t=this,_.each(e,function(e,i){setTimeout(function(){var n;n=t.$el.find(".sub_nav ul li").eq(i),n.addClass("up"),setTimeout(function(){n.find("span").html(e),n.removeClass("up")},900)},100*i)})},afterLoad:function(){this.calcHeight(),this.delegateEvents(),App.appLoaded(),App.pageLoaded(),this.markWords(),this.showBGWords()},close:function(){var e;e=this,this.spinWords=!1,setTimeout(function(){return e.$el.find(".marked").removeClass("marked"),e.$el.addClass("before_open"),e.$el.find(".key_words .word").addClass("left")},1e3)},markWords:function(){var e,t;e=this.model.get("content")[this.lng.get("lngName")]["keyWords"+(this.$el.find(".offers .active").index()+1)],t=this,_.each(e,function(e,i){setTimeout(function(){t.$el.find('.offers .active .word[data-word="'+e+'"]').addClass("marked")},200*i+600)})},tabClick:function(e){$(e.currentTarget).hasClass("active")||(this.$el.find(".sub_nav .active, .offers .active").removeClass("active"),$(e.currentTarget).addClass("active"),this.$el.find(".offers ul li").eq($(e.currentTarget).index()).addClass("active"),this.markWords())},calcHeight:function(){this.$el.find(".offers ul").css("height",Math.max(this.$el.find(".offers ul li").eq(0).height(),this.$el.find(".offers ul li").eq(1).height()))},showBGWords:function(){var e,t,i;t=this.$el.find(".key_words .word").length,e=function(){for(var e=[],i=0;0<=t?i<t:i>t;0<=t?i++:i--)e.push(i);return e}.apply(this),e=_.shuffle(e),i=this,_.each(e,function(e,t){return setTimeout(function(){var t;t=i.$el.find(".key_words .word").eq(e),t.removeClass("left")},100*t)}),this.spinWords=!0,this.spinBgWords()},spinBgWords:function(){var e,t,i,n,s;t=this,i=_.random(2,3),n=function(){for(var e=[],t=0,i=this.$el.find(".key_words .word").length;0<=i?t<i:t>i;0<=i?t++:t--)e.push(t);return e}.apply(this),e=_.sample(n,i),s=[],_.each(e,function(e){s.push(t.$el.find(".key_words .word span").eq(e).html())}),s=_.shuffle(s),_.each(e,function(e,i){return setTimeout(function(){return t.spinWord(e,s[i])},400*i)}),setTimeout(function(){!1!==t.spinWords&&t.spinBgWords()},5e3)},spinWord:function(e,t){var i;i=this.$el.find(".key_words .word").eq(e),i.addClass("right"),setTimeout(function(){i.find("span").html(t),i.addClass("left").removeClass("right")},1e3),setTimeout(function(){i.removeClass("left")},1200)}}),App.Views.Contact=Backbone.View.extend({className:"before_open page",tpl:"contactTpl",inv:"inv",initialize:function(e){this.lng=e.lng,this.listenTo(this.lng,"change",function(){this.lngChange()}),this.render()},render:function(){var e;e=this.model.get("content")[this.lng.get("lngName")],this.template=App.template(this.tpl),this.$el.html(this.template(e)),$(".invisible").html(this.$el)},afterLoad:function(){App.appLoaded(),setTimeout(function(){return App.pageLoaded()},300),"undefined"!=typeof google&&null!==google&&this.resizeMap()},close:function(){var e;e=this,setTimeout(function(){return e.$el.addClass("before_open")},1e3)},resizeMap:function(){var e;e=this.map.getCenter(),google.maps.event.trigger(this.map,"resize"),this.map.setCenter(e)},initMap:function(){var e,t;t=this,e={url:"/assets/images/pin.svg",anchor:new google.maps.Point(55.682638,37.6157443),scaledSize:new google.maps.Size(32,42)},this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:55.682638,lng:37.6077443},disableDefaultUI:!0,zoom:16,icon:this.icon,styles:[{stylers:[{visibility:"simplified"}]},{stylers:[{color:"#18181e"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"},{color:"#2d2f3a"}]},{featureType:"water",stylers:[{color:"#3e4551"},{lightness:7}]},{elementType:"labels.text.fill",stylers:[{visibility:"off"},{lightness:25}]}]}),new google.maps.Marker({position:{lat:55.682638,lng:37.6157443},map:this.map,draggable:!1,icon:e,zIndex:-20}),google.maps.event.addListenerOnce(this.map,"tilesloaded",function(){return $(".invisible").html(""),setTimeout(function(){t.$el.find("#map").removeClass("loading")},300)}),google.maps.event.addDomListener(window,"resize",function(){t.resizeMap()}),this.$el.find("#gm_script").remove()},lngChange:function(){var e,t;t=this.$el.find(".address"),e=this.model.get("content")[this.lng.get("lngName")].address,t.addClass("up"),setTimeout(function(){t.find("span").html(e),t.removeClass("up")},700)},events:{}}),App.Views.Home=Backbone.View.extend({className:"page",tpl:"homeTpl",inv:"inv",prevSlide:0,currentSlide:0,slidesLength:3,text3Counter:0,busy:!1,lastY:0,kldLoaded:!1,maskLoaded:!1,text3Interval:null,initialize:function(e){this.lng=e.lng,this.listenTo(this.lng,"change",function(){this.lngChange()}),this.render()},render:function(){var e;this.slides=this.model.get("content")[this.lng.get("lngName")],this.template=App.template(this.tpl),this.$el.html(this.template(this.slides[0])),e=this,this.kldModel=new App.Models.Kaleidoskope({images:e.model.get("images"),current:0}),this.kld=new App.Views.Kaleidoskope({model:this.kldModel,kld:this.$el.find("#kld1")}),this.mask=new App.Views.Mask({model:this.kldModel,mask:this.$el.find(".text_mask").eq(0),parent:this})},pageLoaded:function(){var e;e=this,this.kldLoaded=!0,this.kldLoaded&&(setTimeout(function(){return App.appLoaded()},100),setTimeout(function(){return e.updateSlider()},500))},afterLoad:function(){this.$el.find("canvas").css("visibility","visible"),this.kld.model.set({loop:!0}),setTimeout(function(){return App.pageLoaded()},300),null===this.text3Interval&&this.initSpinner(),this.delegateEvents()},lngChange:function(){this.slides=this.model.get("content")[this.lng.get("lngName")],this.updateSlider()},kldStop:function(){return this.kld.model.set({loop:!1})},events:{"click .next":"next","click .prev":"prev",mousewheel:"mousewheel",touchmove:"touchmove"},next:function(){if(this.busy)return void console.log(this.busy);this.prevSlide=this.currentSlide,this.currentSlide===this.slidesLength-1?this.currentSlide=0:this.currentSlide++,this.updateSlider()},prev:function(){this.busy||(this.prevSlide=this.currentSlide,this.currentSlide<=0?this.currentSlide=this.slidesLength-1:this.currentSlide--,this.updateSlider())},updateSlider:function(){var e;e=this,this.busy=!0,this.$el.find(".current").removeClass("s0 s1 s2 s3").addClass("s"+this.currentSlide),this.$el.find(".sl_controls .active").removeClass("active"),this.$el.find(".sl_controls .item").eq(this.currentSlide).addClass("active"),this.currentSlide===this.slidesLength-1?this.$el.find(".sl_controls .next").addClass("flip"):this.$el.find(".sl_controls .next").removeClass("flip"),this.filterOn(),setTimeout(function(){return e.busy=!1},1500),this.hideText2(),this.hideText3(),this.killSpinner(),setTimeout(function(){var t;return t=e.$el.find(".text2"),t.html(e.slides[e.currentSlide].text2),t.splitByLines(),e.showText2(),e.text3Counter=0,e.updateText3(),e.updateText4(),e.showText3(),e.initSpinner()},1e3),this.kldModel.set("current",this.currentSlide)},mousewheel:function(e){this.busy||this.kld.myp5.busy||(e.originalEvent.wheelDelta<0?this.next():this.prev())},touchmove:function(e){var t;e.preventDefault(),t=e.originalEvent.touches[0].clientY,t<this.lastY-10?this.prev():t>this.lastY+10&&this.next(),this.lastY=t},hideText2:function(){this.$el.find(".slider").addClass("on_change"),this.$el.find(".text2 span").each(function(e){var t;return t=this,setTimeout(function(){return $(t).addClass("up")},80*e),setTimeout(function(){return $(t).addClass("down").removeClass("up")},80*e+700)})},showText2:function(){this.$el.find(".slider").removeClass("on_change"),this.$el.find(".text2 span").each(function(e){var t;return t=this,setTimeout(function(){return $(t).removeClass("down")},100*e)})},initSpinner:function(){var e;null===this.text3Interval&&(e=this,this.killSpinner,this.text3Interval=setInterval(function(){return e.spinText3()},7e3))},killSpinner:function(){clearInterval(this.text3Interval),delete this.text3Interval},hideText3:function(){this.$el.find(".text4 span").addClass("up"),this.$el.find(".text3 .string").each(function(e){var t;return t=this,setTimeout(function(){return $(t).addClass("right")},250*e),setTimeout(function(){return $(t).addClass("left").removeClass("right")},250*e+1e3)})},showText3:function(){this.$el.find(".text4 span").removeClass("up"),this.$el.find(".text3 .string").each(function(e){var t;return t=this,setTimeout(function(){return $(t).removeClass("left")},250*e)})},updateText3:function(){var e;e=this,this.$el.find(".text3 .string").each(function(t){return $(this).find("span").html(e.slides[e.currentSlide].text3[e.text3Counter][t])})},updateText4:function(){this.$el.find(".text4 span").html(this.slides[this.currentSlide].text4[0])},spinText3:function(){var e;e=this,this.text3Counter++,this.text3Counter>=this.slides[this.currentSlide].text3.length&&(this.text3Counter=0),this.hideText3(),setTimeout(function(){return e.updateText3()},1500),setTimeout(function(){return e.showText3()},2e3),this.$el.find(".text4 span").addClass("up"),setTimeout(function(){return e.$el.find(".text4 span").html(e.slides[e.currentSlide].text4[e.text3Counter]).removeClass("up")},1e3)},filterOn:function(){var e,t,i;t=4,e=80,i=this,$({i:0}).animate({i:t},{duration:e,step:function(e,t){i.$el.find("#title").attr("y",e%2)}})},filterOff:function(){var e,t,i;i=this,t=4,e=100,$({i:t}).animate({i:0},{duration:e,step:function(e,t){i.$el.find("#displacement").attr("scale",50*e),i.$el.find("#title").attr("y",e%2)}})},changeText1:function(){var e,t,i;void 0!==this.model.get("content").ru[this.currentSlide]&&(i=this,e=function(t,i,n){var s;void 0===n&&(n=0),n>=t.html().length||(s=t.html().replaceAt(n,i[n]),t.html(s),setTimeout(function(){return e(t,i,n+1)},5))},t=this.model.get("content").ru[this.currentSlide].text1,e(i.$el.find("#title"),t))}}),App.Views.Kaleidoskope=Backbone.View.extend({params:{image_path:"/assets/images/",image_url:""},initialize:function(e){var t;t=this,this.$el=e.kld,this.params.image_url=this.params.image_path+this.model.get("images")[0],this.listenTo(this.model,"change:current",function(){this.changeImage()}),this.listenTo(this.model,"change:loop",function(){null!=t.myp5&&(!0===t.model.get("loop")?t.myp5.loop():t.myp5.noLoop())}),this.render()},render:function(){this.$el.html("<span></span>"),this.init()},init:function(){this.myp5=new p5(this.kaleidoscope,this.$el.find("span")[0]),this.myp5.imgNext=new p5.Image(700,700)},changeImage:function(){var e;e=this,this.myp5.imgNext.copy(this.myp5.images[e.model.get("current")],0,0,700,700,0,0,700,700),this.myp5.static=!1,this.myp5.doChangeImg=!0,this.myp5.busy=!1},kaleidoscope:function(e){e.doChangeImg=!1,e.offsetChangeImgX=0,e.offsetChangeImgY=0,e.easing=.1,e.busy=!1,e.j=-1,e.triangleSize=500,e.cache="",e.images=[],e.triangleHeight=e.ceil(e.triangleSize*e.sqrt(3)/2),e.cacheTriangleG="",e.cacheTriangle="",e.static=!1,e.preload=function(){e.images[0]=e.loadImage("/assets/images/1.jpg",function(){e.images[1]=e.loadImage("/assets/images/2.jpg",function(){e.images[2]=e.loadImage("/assets/images/4.jpg",function(){App.pages.home.kldLoaded=!0,App.pages.home.pageLoaded()})})})},e.setup=function(){var t;e.createCanvas(window.innerWidth,window.innerHeight),t=e.displayDensity(),e.pixelDensity(t),e.frameRate(30),e.img=new p5.Image(e.images[0].width,e.images[0].height),e.img.copy(e.images[0],0,0,e.images[0].width,e.images[0].height,0,0,e.images[0].width,e.images[0].height),e.cache=new e.Cache,e.triangles=e.initTriangles(),e.img_copy=new p5.Image(e.triangleSize,e.triangleHeight),e.cacheTriangleG=e.createGraphics(e.triangleSize,e.triangleHeight),e.cacheTriangleG.strokeWeight(0),e.cacheTriangleG.triangle(0,0,e.triangleSize,0,e.triangleSize/2,e.triangleHeight),e.cacheTriangle=e.cacheTriangleG.get(0,0,e.triangleSize,e.triangleHeight),e.offsetCutX=e.img.width-e.triangleSize,e.offsetCutY=e.img.height-e.triangleHeight,$("body > canvas").remove()},e.draw=function(){var t;if(!e.static){for(e.doChangeImg&&e.cache.change(e.img,e.imgNext),e.cache.move(),e.cache.cut(e.img),t=0;t<e.triangles.length;)e.triangles[t].display(),t++;App.mob&&(e.static=!1)}},e.kTriangle=function(e,t,i,n,s){this.x=e,this.y=t,this.angle=i,this.scaleX=n,this.scaleY=s},e.kTriangle.prototype.display=function(){e.push(),e.translate(this.x,this.y),e.scale(this.scaleX,this.scaleY),e.rotate(this.angle),e.image(e.img_copy,0,0),e.pop()},e.Cache=function(){this.x=(e.img.width-e.triangleSize)/2,this.y=(e.img.height-e.triangleHeight)/2,this.speedX=0,this.speedY=0},e.Cache.prototype.change=function(t,i){var n;n=t.height-e.offsetChangeImgY,e.offsetChangeImgY+=n*e.easing,e.offsetChangeImgY=e.floor(e.offsetChangeImgY),e.offsetChangeImgY+10>i.height?(e.offsetChangeImgY=0,e.doChangeImg=!1,e.busy=!1):(e.img.copy(i,0,i.height-e.offsetChangeImgY,t.width,e.offsetChangeImgY,0,0,t.width,e.offsetChangeImgY),e.img.copy(i,0,0,t.width,e.offsetChangeImgY,0,t.height-e.offsetChangeImgY,t.width,e.offsetChangeImgY),e.busy=!0)},e.Cache.prototype.move=function(){var t,i;e.mouseX>window.innerWidth||e.mouseY>window.innerHeight||(t=e.mouseX,i=e.mouseY,this.speedX=(t-this.x)/20,this.speedY=(i-this.y)/20,this.x+=this.speedX,this.y+=this.speedY)},e.Cache.prototype.cut=function(t){var i,n;i=e.map(this.x,0,e.width,0,e.offsetCutX),n=e.map(this.y,0,e.height,0,e.offsetCutY),e.img_copy.copy(t,i,n,e.triangleSize,e.triangleHeight,0,0,e.triangleSize,e.triangleHeight),e.img_copy.mask(e.cacheTriangle)},e.initTriangles=function(){var t,i,n;for(n=[],t=0;t<e.ceil(e.height/e.triangleHeight/2);){for(i=0;i<e.ceil(e.width/e.triangleSize/3);)n[++e.j]=new e.kTriangle(0+3*e.triangleSize*i,0+2*e.triangleHeight*t,e.PI/3,-1,1),n[++e.j]=new e.kTriangle(0+3*e.triangleSize*i,0+2*e.triangleHeight*t,0,1,1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,-e.PI/3,-1,1),n[++e.j]=new e.kTriangle(0+3*e.triangleSize*i,2*e.triangleHeight+2*e.triangleHeight*t,e.PI/3,-1,-1),n[++e.j]=new e.kTriangle(0+3*e.triangleSize*i,2*e.triangleHeight+2*e.triangleHeight*t,0,1,-1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,-e.PI/3,-1,-1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,e.PI/3,-1,-1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,0,1,-1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,e.PI/3,-1,1),n[++e.j]=new e.kTriangle(3*e.triangleSize/2+3*e.triangleSize*i,e.triangleHeight+2*e.triangleHeight*t,0,1,1),n[++e.j]=new e.kTriangle(3*e.triangleSize+3*e.triangleSize*i,0+2*e.triangleHeight*t,-e.PI/3,-1,-1),n[++e.j]=new e.kTriangle(3*e.triangleSize+3*e.triangleSize*i,0+2*e.triangleHeight*t,e.PI/3,-1,1),n[++e.j]=new e.kTriangle(3*e.triangleSize+3*e.triangleSize*i,2*e.triangleHeight+2*e.triangleHeight*t,-e.PI/3,-1,1),n[++e.j]=new e.kTriangle(3*e.triangleSize+3*e.triangleSize*i,2*e.triangleHeight+2*e.triangleHeight*t,e.PI/3,-1,-1),i++;t++}return e.j=-1,n},e.windowResized=function(){e.resizeCanvas(window.innerWidth,window.innerHeight),e.triangles=null,
e.triangles=e.initTriangles(),e.static=!1,e.draw()}}}),App.Views.Main=Backbone.View.extend({className:"app inv",tpl:"appTpl",mob_nav:1024,initialize:function(e){this.lng=e.lng,this.listenTo(this.lng,"change",function(){App.metaData(App.pageMetaData),this.updateNav()}),this.listenTo(this.model,"change:loaded",function(){App.hidePreloader()}),this.render()},render:function(){var e;e=_.extend({},this.model.toJSON(),{_nav:this.model.get("nav")[this.lng.get("lngName")]}),this.template=App.template(this.tpl),this.$el.html(this.template(e)),this.$el.find(".lng").addClass(this.lng.get("lngName")),$("body").append(this.$el),Math.max(document.documentElement.clientWidth,window.innerWidth||0)>this.mob_nav&&this.showNav()},events:{"click .logo":"navigate","click .nav a":"navigate","click .lng a":"lngChange","click .nav_btn":"toggleNav","click .nav":"toggleNav"},navigate:function(e){var t;return e.preventDefault(),App.pages.works.caseVisible&&App.pages.works.hideCase(),$(".close_btn").hasClass("active")&&this.toggleNav(),this.model.get("currentPage")===$(e.currentTarget).attr("data-page")?void console.log("same page"):""===this.model.get("currentPage")&&"/"===$(e.currentTarget).attr("data-page")?void(App.pages.home.busy||(App.pages.home.currentSlide=0,App.pages.home.updateSlider())):($(e.currentTarget).hasClass("logo")?(App.pages.home.busy||(App.pages.home.currentSlide=0,App.pages.home.updateSlider()),t=this.lng.get("lng")):t=this.lng.get("lng")+"/"+$(e.currentTarget).attr("href"),this.closeCurrentPage(),void setTimeout(function(){return App.router.navigate(t,{trigger:!0})},700))},lngChange:function(e){e.preventDefault(),this.$el.find(".lng").toggleClass("ru"),""===this.lng.get("lng")?this.lng.set("lng","en"):this.lng.set("lng",""),"/"===this.model.get("currentPage")?App.router.navigate($(e.target).attr("href"),{trigger:!1}):App.router.navigate($(e.target).attr("href")+this.model.get("currentPage"),{trigger:!1})},updateNav:function(){var e;e=this.model.get("nav")[this.lng.get("lngName")],_.each(e,function(e,t){setTimeout(function(){var t,i;t=$('.nav ul li a[data-page="'+e.page+'"]'),i=t.parent(),i.addClass("up"),setTimeout(function(){t.html(e.title),i.removeClass("up")},400)},100*t)})},showNav:function(){this.$el.find(".nav li").each(function(e){var t;return t=this,setTimeout(function(){return $(t).removeClass("down")},50*e)})},hideNav:function(){var e;e=this.$el,this.$el.find(".nav li").each(function(e){var t;return t=this,setTimeout(function(){return $(t).addClass("up")},50*e)}),setTimeout(function(){return e.find(".nav li").removeClass("up").addClass("down")},1e3)},toggleNav:function(){var e;Math.max(document.documentElement.clientWidth,window.innerWidth||0)>this.mob_nav||(e=this,this.$el.find(".nav").hasClass("active")?(this.hideNav(),this.$el.find(".close_btn").removeClass("active"),setTimeout(function(){e.$el.find(".nav").removeClass("active"),e.$el.find(".nav_btn").removeClass("hid"),e.$el.find(".top_fixed, .links").removeClass("inv")},500)):(this.$el.find(".nav").addClass("active"),this.$el.find(".nav_btn").addClass("hid"),this.$el.find(".top_fixed, .links").addClass("inv"),setTimeout(function(){e.showNav(),e.$el.find(".close_btn").addClass("active")},500)))},closeCurrentPage:function(){var e;$(".page_wrapper").addClass("close_page"),$(".nav ul .active").removeClass("active"),e=App.mainModel.get("currentPage"),""===e&&(e="home"),void 0!==App.pages[e]&&"function"==typeof App.pages[e].close&&App.pages[e].close()}}),App.Views.Mask=Backbone.View.extend({loaded:!1,initialize:function(e){this.parent=e.parent,this.$el=e.mask,this.listenTo(this.model,"change:current",function(){var e;e=this,e.changeSVG(e.model.get("current"))}),this.render()},render:function(){this.$el.html("<span></span>"),this.init()},init:function(){var e;e=this,this.svg=[],null===this.model?this.loadSVG("notfound.svg",function(){e.parent.$el.find(".svg_mask .hidden, .svg_mask .line").html(e.svg[0])}):this.loadSVG("emotion.svg",function(){e.loadSVG("vision.svg",function(){e.loadSVG("tech.svg",function(){e.parent.$el.find(".svg_mask .hidden, .svg_mask .line").html(e.svg[0])})})})},loadSVG:function(e,t){var i;i=this,$.get("/assets/images/"+e,function(e){var n;n=$(e).find("svg"),null!=n&&i.svg.push(n),"function"==typeof t&&t()})},changeSVG:function(e){var t;t=this,$(".svg_mask .line").addClass("hid"),setTimeout(function(){$(".svg_mask .line").html($(t.svg[e]).clone())},1e3),setTimeout(function(){$(".svg_mask .line").removeClass("hid")},1100)}}),App.Views.Noise=Backbone.View.extend({initialize:function(e){this.$el=e.el,this.render()},render:function(){this.$el.html("<span></span>"),this.init()},init:function(){this.myp5=new p5(this.sketch_noise,this.$el.find("span")[0])},loop:function(){null!=this.myp5&&this.myp5.loop()},noLoop:function(){null!=this.myp5&&this.myp5.noLoop()},sketch_noise:function(e){e.linesNoise="",e.setup=function(){e.density=e.displayDensity(),e.pixelDensity(e.density),e.canvas=e.createCanvas(window.innerWidth,window.innerHeight),e.linesNoise=e.createGraphics(window.innerWidth,window.innerHeight),e.init(),e.frameRate(20),$("body > canvas").remove(),e.windowResized()},e.draw=function(){e.clear(),e.lines(),e.fasterNoise(),e.blendMode(e.OVERLAY),e.image(e.imgNoise,0,0)},e.init=function(){e.imgNoise=e.createImage(window.innerWidth,window.innerHeight),e.imgNoise.loadPixels()},e.lines=function(){var t,i;for(i=0;i<20;)t=e.random(0,e.height),e.stroke(e.random(0,200),e.random(10,30)),e.strokeWeight(e.random(1,4)),e.line(0,t,e.width,t),i++},e.fasterNoise=function(){var t,i,n;for(t=new Uint32Array(e.imgNoise.pixels.buffer),n=t.length,i=0;i<n;)t[i++]=(255*e.random()|0)<<24,i++;e.imgNoise.updatePixels()},e.windowResized=function(){e.density=e.displayDensity(),e.pixelDensity(e.density),e.resizeCanvas(window.innerWidth,window.innerHeight),e.init()}}}),App.Views.Notfound=Backbone.View.extend({className:"page before_open",tpl:"notfoundTpl",inv:"inv",noiseLoaded:!1,maskLoaded:!1,initialize:function(e){var t;t=this,this.lng=e.lng,this.listenTo(this.lng,"change",function(){this.lngChange()}),this.listenTo(this.model,"change:loop",function(){null!=t.p5_noise&&(!0===t.model.get("loop")?t.p5_noise.loop():t.p5_noise.noLoop())}),this.render(),this.$el.find(".svg_mask").addClass("not_found"),this.mask=new App.Views.Mask({model:null,mask:this.$el.find(".text_mask").eq(0),parent:this})},render:function(){var e;e=this.model.get("content")[this.lng.get("lngName")],this.template=App.template(this.tpl),this.$el.html(this.template(e)),this.p5_init()},pageLoaded:function(){this.$el.find("canvas").css("visibility","visible"),this.maskLoaded&&setTimeout(function(){return App.appLoaded(),App.pageLoaded()},100)},afterLoad:function(){this.model.set({loop:!0}),this.pageLoaded()},noiseStop:function(){this.model.set({loop:!1})},lngChange:function(){var e;e=this,this.hideText2(),setTimeout(function(){var t;return t=e.$el.find(".text2 span"),t.html(e.model.get("content")[e.lng.get("lngName")].text),e.showText2()},1e3)},hideText2:function(){this.$el.find(".slider").addClass("on_change"),this.$el.find(".text2 span").each(function(e){var t;return t=this,setTimeout(function(){return $(t).addClass("up")},80*e),setTimeout(function(){return $(t).addClass("down").removeClass("up")},80*e+700)})},showText2:function(){this.$el.find(".slider").removeClass("on_change"),this.$el.find(".text2 span").each(function(e){var t;return t=this,setTimeout(function(){return $(t).removeClass("down")},100*e)})},events:{},p5_init:function(){this.p5_noise=new App.Views.Noise({el:this.$el.find("#noise_span")})}}),App.Views.Works=Backbone.View.extend({className:"page works before_open",tpl:"worksTpl",inv:"right_inv",prevSlide:0,currentSlide:0,slidesLength:8,postersLoaded:0,caseVisible:!1,caseScrolled:!1,busy:!1,nextPosterSwitch:!1,video:[],cta:{ru:"РЎРјРѕС‚СЂРµС‚СЊ РєРµР№СЃ",en:"View case"},link_caption:{ru:"РџРµСЂРµР№С‚Рё РЅР° СЃР°Р№С‚",en:"Visit site"},comming_soon:{ru:"РЎР°Р№С‚ РІ СЂР°Р·СЂР°Р±РѕС‚РєРµ",en:"Comming soon..."},initialize:function(e){var t,i,n;n=this,App.mob&&$("html").addClass("mob"),this.lng=e.lng,this.listenTo(this.lng,"change",function(){this.lngChange()}),$(window).on("resize",function(){n.resize()}),this.render(),i=this.findCaseNumberByName(e.work),"boolean"!=typeof i?(this.currentSlide=this.findCaseNumberByName(e.work),this.updateSlider()):e.work&&(console.log(e),t=this.lng.get("lng")+"/",App.router.navigate(t+"works/"))},render:function(){var e;this.slides=this.model.get("content")[this.lng.get("lngName")],e=_.extend({},this.model.get("content")[this.lng.get("lngName")][0],{cta:this.cta[this.lng.get("lngName")],link_caption:this.link_caption[this.lng.get("lngName")]}),this.template=App.template(this.tpl),this.$el.html(this.template(e))},events:{"click .next":"next","click .prev":"prev","click .cta":"showCaseButtonHandler","click .close_case":"hideCase","click .next_poster:not(.noact)":"nextPosterAnimStart",mousewheel:"mousewheel",mousemove:"mousemove",touchmove:"touchmove",touchstart:"touchstart"},loadBar:{init:function(){null==this.bar&&(this.perc=0,this.bar=$('<div class="loadbar"></div>'),this.progress=$('<div class="progress"></div>'),this.waiter=$('<div class="waiter"></div>'),this.bar.append(this.progress),this.bar.append(this.waiter),$("body").append(this.bar),this.bar.addClass("active"),this.showWaiter())},hide:function(){this.bar.removeClass("active")},showWaiter:function(){this.waiter.addClass("active")},hideWaiter:function(){this.waiter.removeClass("active")},destroy:function(){var e;e=this,null!=this.bar&&(this.hide(),setTimeout(function(){e.bar.html(""),e.bar.remove(),e.bar=void 0},1e3))},to:function(e){return this,this.perc=e,this.hideWaiter(),this.progress.addClass("active"),this.progress.css("transform","translateX("+(-100+e)+"%)"),e>=100&&this.destroy(),e}},caseImagesLazy:function(){var e,t;t=this,t.lazyChain=function(){t.toLazy.eq(0).Lazy({delay:10,afterLoad:function(){var e,i;t.toLazy.eq(0).addClass("loaded"),t.toLazy=t.toLazy.not(t.toLazy.eq(0)),e=t.toLazy.length,i=t.totalLazies-e,t.loadBar.to(100*i/t.totalLazies),e>0&&t.lazyChain()}})},e=function(){t.toLazy=$(".case img"),t.totalLazies=t.toLazy.length,t.lazyChain(),$(".case-title").addClass("active"),setTimeout(function(){t.offsets.refresh(),t.caseVisible&&(t.caseContainerScrollable=!0,t.scrollCaseContainer(-100),t.nextPosterSwitch=!1)},1600)},this.toLoad=$(".case img"),this.carouselsToInit=this.carousels=$(".case .owl-carousel"),this.previewsLoaded=!1,this.carouselsReady=!1,$(".case img:not(.loaded)").on("load",function(){t.toLoad=t.toLoad.not(this),0!==t.toLoad.length||t.previewsLoaded||(t.previewsLoaded=!0,e())}),this.carousels.each(function(){var e;e=$(this).attr("data-visible-items"),e=null==e?3:parseInt(e),this.owlObj=$(this).owlCarousel({center:!0,stagePadding:0,smartSpeed:450,loop:!0,nav:!1,mouseDrag:!1,responsive:{0:{items:1},481:{items:e}},onInitialized:function(){console.log("carousel ready")}})}),$(".case").on("click",".owl-item.active:not(.center), .owl-carousel.ovv .owl-item:not(.center)",function(){var e,t;t=$(this).parents(".owl-carousel")[0],e=$(this).next(),$(t).hasClass("translating")||($(t).addClass("translating"),e.hasClass("center")?t.owlObj.trigger("prev.owl.carousel"):t.owlObj.trigger("next.owl.carousel"),setTimeout(function(){$(t).removeClass("translating")},500))})},afterLoad:function(){var e,t;$("body").append(App.preloader),$(".preloader").removeClass("hid"),t=this,0===this.video.length&&(_.each(this.slides,function(e){t.video.push(t.createVideo(e.video,e.poster))}),this.$el.find("#video").remove(),this.$el.find(".video_wr").prepend(t.video[0])),this.delegateEvents(),document.getElementById("video")?void 0!==(e=document.getElementById("video").play())&&e.then(function(){App.pageLoaded(),App.hidePreloader()}).catch(function(e){App.pageLoaded(),App.hidePreloader()}):(App.pageLoaded(),App.hidePreloader())},close:function(){var e;e=this.$el,e.addClass("close_page"),setTimeout(function(){return e.addClass("before_open").removeClass("close_page")},1e3)},resize:function(){var e;e=this,setTimeout(function(){e.offsets.refresh(),_.each(e.offsets.selectors,function(t,i,n){e.scrollTo(t,t.scrollOffsets.current)})},500)},lngChange:function(){var e,t;t=this,e=0,this.caseVisible&&(this.hideCase(),e=600),setTimeout(function(){t.slides=t.model.get("content")[t.lng.get("lngName")],t.updateSlider(),t.$el.find(".cta").addClass("change"),setTimeout(function(){t.$el.find(".cta span").html(t.cta[t.lng.get("lngName")]),t.$el.find(".cta").removeClass("change")},700)},e)},next:function(e){this.busy||(this.prevSlide=this.currentSlide,this.currentSlide===this.slidesLength-1?this.currentSlide=0:this.currentSlide++,"boolean"==typeof e&&!0===e?this.updateSliderNoAnim():this.updateSlider())},prev:function(e){this.busy||(this.prevSlide=this.currentSlide,this.currentSlide<=0?this.currentSlide=this.slidesLength-1:this.currentSlide--,"boolean"==typeof e&&!0===e?this.updateSliderNoAnim():this.updateSlider())},findCaseNumberByName:function(e){var t;return t=!1,_.each(this.slides,function(i,n,s){i.name===e&&(t=n)}),t},showCaseButtonHandler:function(e){e.preventDefault(),this.ajaxGetCase()},ajaxGetCase:function(e,t){var i,n,s,a,o,l;l=this,s=App.lng.get("lng"),s?(a=s,s="/"+s+"/"):a="ru",n=this.model.get("content"),i=n[a][this.currentSlide].case_link,o=n[a][this.currentSlide].name,l.loadBar.init(),$.ajax(i).done(function(e){$(".app").hasClass("case_visible")||(this.caseVisible=!0,App.router.navigate(s+"works/"+o),$(".case-container").html(e),l.showCase(),l.caseImagesLazy(),null!=t&&t())})},showCase:function(){var e,t;t=this,$(".app").toggleClass("case_visible"),$(".top_fixed").addClass("inv"),this.caseVisible=!0,this.caseContainerScrollable=!1,void 0===this.caseContainer&&(this.caseContainer=$(".case-container"),this.caseBg=$(".video_wr"),this.offsets.add(this.caseContainer,function(){return window.innerHeight},function(){return-(t.caseContainer.height()-t.caseBg.height())}),this.caseContainer.css("transform","translateY("+this.caseContainer.scrollOffsets.current+"px)"),this.offsets.add(this.caseBg,function(){return 0},function(){return-(t.caseBg.height()+t.caseContainer.height()-window.innerHeight)}),this.caseBg.css("transform","translateY("+this.caseBg.scrollOffsets.current+"px)")),e=this.model.get("content")[this.lng.get("lngName")][this.currentSlide].title,this.caseBg.append('<div class="case-title">'+e+"</div>"),this.busy=!0,setTimeout(function(){t.busy=!1,t.caseBg.css("transition","none")},1600)},hideCase:function(){var e,t,i;for(i=this,this.nextPosterSwitch||null==this.nextPoster||this.nextPosterDestroy(),this.busy=!0,$(".top_fixed").removeClass("inv"),$(".case-title").remove();this.caseBg.scrollOffsets.current!==this.caseBg.scrollOffsets.initial;)this.scrollCaseContainer(100);e=setInterval(function(){(0===i.caseBg[0].getBoundingClientRect().top||App.mob)&&(i.caseBg.css("transition",""),i.caseBg.css("transition-duration","1000ms"),i.caseBg.css("transition-delay","0ms"),$(".app").toggleClass("case_visible"),clearInterval(e))},100),setTimeout(function(){i.caseBg.css("transition-delay",""),i.caseBg.css("transition-duration",""),null!=i.caseContainer&&i.caseContainer.html(""),i.caseContainer=void 0},600),setTimeout(function(){i.busy=!1},1500),this.caseVisible=!1,this.caseContainerScrollable=!1,this.loadBar.destroy(),this.closeCaseBtn.removeClass("active-top active-bottom visible"),t=App.lng.get("lng"),t&&(t+="/"),App.router.navigate(t+"works")},offsets:{add:function(e,t,i){return this.selectors.push(e),e.scrollOffsets={calcInitial:t,calcMax:i,initial:t(),max:i(),current:t(),perc:0,set:function(e,t){this[e]=t,this.calcPerc()},calcPerc:function(){return this.perc=Math.abs((this.current-this.initial)/(this.max-this.initial)),this.perc}}},refresh:function(){_.each(this.selectors,function(e,t,i){var n;n=e.scrollOffsets,n.initial=n.calcInitial(),n.max=n.calcMax(),n.current=n.initial-Math.abs(n.max-n.initial)*n.perc})},selectors:[]},scrollCaseContainer:function(e){var t;App.mob||this.caseContainerScrollable&&(t=parseInt(e),this.caseContainer.scrollOffsets.set("current",this.caseContainer.scrollOffsets.current+t),this.caseBg.scrollOffsets.set("current",this.caseBg.scrollOffsets.current+t),e<0?(this.caseContainer.scrollOffsets.current<=this.caseContainer.scrollOffsets.max&&(Math.abs(this.caseContainer.scrollOffsets.current-this.caseContainer.scrollOffsets.max),this.caseContainer.scrollOffsets.set("current",this.caseContainer.scrollOffsets.max)),this.caseBg.scrollOffsets.current<=this.caseBg.scrollOffsets.max&&this.caseBg.scrollOffsets.set("current",this.caseBg.scrollOffsets.max)):(this.caseContainer.scrollOffsets.current>=this.caseContainer.scrollOffsets.initial&&this.caseContainer.scrollOffsets.set("current",this.caseContainer.scrollOffsets.initial),this.caseBg.scrollOffsets.current>=this.caseBg.scrollOffsets.initial&&this.caseBg.scrollOffsets.set("current",this.caseBg.scrollOffsets.initial)),null==this.nextPoster&&this.nextPosterCreate(),this.scrollTo(this.caseBg,this.caseBg.scrollOffsets.current),this.scrollTo(this.caseContainer,this.caseContainer.scrollOffsets.current),this.caseBg.scrollOffsets.current>-300?$(".top_fixed").removeClass("hid"):$(".top_fixed").addClass("hid"),null==this.topNegativeDelta&&(this.topNegativeDelta=0),null==this.bottomNegativeDelta&&(this.bottomNegativeDelta=0),null==this.closeCaseBtn&&(this.closeCaseBtn=$(".close_case")),0===this.caseBg.scrollOffsets.current?this.topNegativeDelta+=t:this.topNegativeDelta=0,this.topNegativeDelta>500?this.closeCaseBtn.addClass("active-top"):this.closeCaseBtn.removeClass("active-top"),this.caseBg.scrollOffsets.current===this.caseBg.scrollOffsets.max?this.bottomNegativeDelta+=t:(this.bottomNegativeDelta=0,this.nextPoster.removeClass("visible")),this.topNegativeDelta>1700&&(this.topNegativeDelta=0,this.hideCase()),this.bottomNegativeDelta<-300&&this.nextPoster.addClass("visible"))},scrollTo:function(e,t){var i,n;App.mob?(n=.5,i=Circ.easeOut):(n=.2,Linear.easeNone),App.mob||TweenLite.to($(e),n,{transform:"translateY("+t+"px)",ease:i})},mousewheel:function(e){if(App.mob)return void e.preventDefault();if(!0!==this.busy&&!0!==this.nextPosterSwitch)return this.caseVisible?(this.offsets.refresh(),void this.scrollCaseContainer(e.deltaFactor*e.deltaY)):void(e.deltaY<0?this.next():this.prev())},mousemove:function(e){null==this.closeCaseBtn&&(this.closeCaseBtn=$(".close_case")),e.clientX<200&&this.caseVisible?this.closeCaseBtn.addClass("visible"):this.closeCaseBtn.removeClass("visible")},touchstart:function(e){this.lastY=e.originalEvent.touches[0].clientY,this.caseVisible&&null==this.nextPoster&&this.nextPosterCreate()},touchmove:function(e){var t,i;if(this.caseVisible)return i=$("html")[0],void($(window).scrollTop()>=i.scrollHeight-i.clientHeight-100?$(".next_poster").addClass("visible"):$(".next_poster").removeClass("visible"));e.preventDefault(),!0!==this.busy&&!0!==this.nextPosterSwitch&&(t=e.originalEvent.touches[0].clientY,t<this.lastY-10?this.prev():t>this.lastY+10&&this.next(),this.lastY=t)},updateSlider:function(e){var t,i,n;n=500,i=this,this.busy=!0,t=this.$el,t.find(".current").removeClass("s0 s1 s2 s3 s4 s5 s6 s7").addClass("s"+this.currentSlide),t.find(".sl_controls .active").removeClass("active"),t.find(".sl_controls .item").eq(this.currentSlide).addClass("active"),this.currentSlide===this.slidesLength-1?this.$el.find(".sl_controls .next").addClass("flip"):this.$el.find(".sl_controls .next").removeClass("flip"),t.addClass("on_change"),$(".works_content .bg").is(":visible")&&$(".nav_btn").addClass("hid"),t.find(".works_content .bg").addClass("collapsed"),setTimeout(function(){t.find(".video_wr").removeClass("left"),t.find(".project_info .title, .project_info .intro").addClass("up")},n),setTimeout(function(){document.getElementById("video")&&document.getElementById("video").pause(),t.find("#video").remove(),t.find(".poster").remove(),t.find(".video_wr").prepend(i.video[i.currentSlide]).addClass("right"),document.getElementById("video")&&document.getElementById("video").play(),t.find(".project_info .title span").html(i.slides[i.currentSlide].title),t.find(".project_info .num span").html("00"+i.slides[i.currentSlide].id),t.find(".project_info .intro span").html(i.slides[i.currentSlide].intro),""===i.slides[i.currentSlide].web_link?(t.find(".web_link").removeAttr("href").addClass("disabled"),t.find(".web_link").html(i.comming_soon[i.lng.get("lngName")])):(t.find(".web_link").html(i.link_caption[i.lng.get("lngName")]),t.find(".web_link").attr("href",i.slides[i.currentSlide].web_link).removeClass("disabled")),t.find(".cta").attr("href",i.slides[i.currentSlide].link),t.find(".project_info .title, .project_info .intro").removeClass("up").addClass("down")},2*n),setTimeout(function(){t.find(".video_wr").removeClass("right").addClass("left"),t.find(".project_info .title, .project_info .intro").removeClass("down"),t.find(".works_content .bg").removeClass("collapsed")},2.8*n),setTimeout(function(){i.busy=!1,t.removeClass("on_change")},3*n),setTimeout(function(){$(".nav").hasClass("active")||$(".nav_btn").removeClass("hid")},4*n)},updateSliderNoAnim:function(e){var t,i;i=this,t=this.$el,t.find(".current").removeClass("s0 s1 s2 s3 s4 s5 s6 s7").addClass("s"+this.currentSlide),t.find(".sl_controls .active").removeClass("active"),t.find(".sl_controls .item").eq(this.currentSlide).addClass("active"),this.currentSlide===this.slidesLength-1?this.$el.find(".sl_controls .next").addClass("flip"):this.$el.find(".sl_controls .next").removeClass("flip"),document.getElementById("video")&&document.getElementById("video").pause(),t.find("#video").remove(),t.find(".poster").remove(),t.find(".video_wr").prepend(i.video[i.currentSlide]),document.getElementById("video")&&document.getElementById("video").play(),t.find(".project_info .title span").html(i.slides[i.currentSlide].title),t.find(".project_info .num span").html("00"+i.slides[i.currentSlide].id),t.find(".project_info .intro span").html(i.slides[i.currentSlide].intro),""===i.slides[i.currentSlide].web_link?(t.find(".web_link").removeAttr("href").addClass("disabled"),t.find(".web_link").html(i.comming_soon[i.lng.get("lngName")])):(t.find(".web_link").html(i.link_caption[i.lng.get("lngName")]),t.find(".web_link").attr("href",i.slides[i.currentSlide].web_link).removeClass("disabled")),t.find(".cta").attr("href",i.slides[i.currentSlide].link)},createVideo:function(e,t){var i,n,s,a,o;return o=this,App.mob||"undefined"===e?(n=new Image,n.onload=function(){o.postersLoaded++,o.postersLoaded===o.slidesLength&&App.appLoaded(),n=null},n.src="/assets/images/"+t,i=document.createElement("div"),$(i).addClass("poster"),$(i).attr("style","background-image:url(/assets/images/"+t+")")):(i=document.createElement("video"),i.id="video",i.muted=!0,i.loop=!0,i.poster="/assets/images/"+t,s=document.createElement("source"),s.type="video/mp4",s.src="/upload/"+e+".mp4",a=document.createElement("source"),a.type="video/webm",a.src="/upload/"+e+".webm",i.appendChild(s)),i},nextPosterCreate:function(){var e,t,i,n,s,a;a=this,this.nextPoster=$('<div class="next_poster"></div>'),this.nextPoster.html($(".video_wr").html()),this.nextPoster.find(".poster").remove(),this.nextPoster.find(".ovrl").remove(),this.nextPoster.find(".case-title").remove(),n=a.currentSlide+1,n===a.slidesLength&&(n=0),t=$('<div class="next-poster-bg"></div>'),t.css("background-image",$(a.video[n]).css("background-image")),this.nextPoster.prepend(t),i=this.model.get("content")[a.lng.get("lngName")][n],i.title,e=$('<div class="next-case-title"></div>'),s=$('<div class="show-next-case"></div>'),e.html(i.title),"ru"===a.lng.get("lngName")&&s.html(this.cta.ru),"en"===a.lng.get("lngName")&&s.html(this.cta.en),e.append(s),this.nextPoster.append(e),$(".page.works").append(this.nextPoster)},nextPosterDestroy:function(){var e;e=this,this.nextPoster.addClass("finish"),setTimeout(function(){e.nextPoster.remove(),e.nextPoster=void 0},500)},nextPosterAnimStart:function(){var e;e=this,this.nextPosterSwitch=!0,this.nextPoster.addClass("noact active"),setTimeout(function(){e.hideCase.apply(e)},500),setTimeout(function(){e.next(!0),e.ajaxGetCase(void 0,function(){setTimeout(function(){e.nextPosterDestroy.apply(e)},1e3)})},2100)}}),App.Views.Page=Backbone.View.extend({initialize:function(){},render:function(){},events:[],showPreloader:function(){return this.$el.find(".preloader").addClass("show")},hidePreloader:function(){return this.$el.find(".preloader").removeClass("show")}});
//# sourceMappingURL=maps/app.js.map